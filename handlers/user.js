'use strict';const _=require("lodash"),DATA=[{username:"balasir",email:"bala@sir",display_name:"Bala",attended:[],created_at:"2021-07-03T14:39:56.886Z"},{username:"timroth88",email:"tim88@tim",display_name:"Tim Roth",attended:[],created_at:"2021-06-22T13:43:36.284Z"}],IDEAL_DOC={username:null,email:null,display_name:null,attended:[],created_at:_.now(),updated_at:_.now()};function sanitize(a){let b=_.cloneDeep(a);for(let c in a)(_.isNil(a[c])||"created_at"===c)&&_.omit(b,c);return _.isNil(a.duration)||(b.duration=parseInt(a.duration)),!_.isNil(a.attended)&&_.isString(a.attended)&&(b.attended=a.attended.split(",")),b}function createUserHandler(a){try{let b=_.merge(IDEAL_DOC,sanitize(_.omit(a.body,"password")));return{statusCode:201,body:JSON.stringify(b)}}catch(a){return{statusCode:500}}}function listUserHandler(a){try{let b=_.has(null===a||void 0===a?void 0:a.queryStringParameters,"limit")?parseInt(a.queryStringParameters.limit):DATA.length;return{statusCode:200,body:JSON.stringify({total_docs:DATA.length,docs:_.sampleSize(DATA,b)})}}catch(a){return{statusCode:500}}}function getUserHandler(a){try{let b=_.find(DATA,{username:a.pathParameters.username});return _.isEmpty(b)?{statusCode:404}:{statusCode:200,body:JSON.stringify(b)}}catch(a){return{statusCode:500}}}function updateUserHandler(a){try{let b=_.find(DATA,{username:a.pathParameters.username});return _.isEmpty(b)?{statusCode:404}:{statusCode:200,body:JSON.stringify(_.merge(b,sanitize(a.body)))}}catch(a){return{statusCode:500}}}function deleteUserHandler(){return{statusCode:204}}module.exports={createUserHandler,listUserHandler,getUserHandler,updateUserHandler,deleteUserHandler};